<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Flake Lab - Items</title>
    <style>
      body { font-family: sans-serif; margin: 24px; }
      .item { margin: 8px 0; }
      #overlay {
        position: fixed; inset: 0;
        background: rgba(0,0,0,0.01);
        z-index: 9999;
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="overlay"></div>
    <h1>Items</h1>
    <div id="list">Loading...</div>

    <script>
      async function load() {
        const res = await fetch("/api/items");
        const data = await res.json();
        const list = document.getElementById("list");
        list.innerHTML = "";
        data.items.forEach(it => {
          const div = document.createElement("div");
          div.className = "item";
          div.innerHTML = `<a href="/items/${it.id}">${it.name}</a>`;
          list.appendChild(div);
        });
      }

      // optional overlay flake (enabled by server-injected config)
      const OVERLAY_MS = window.__OVERLAY_MS__ || 0;
      if (OVERLAY_MS > 0) {
        const ov = document.getElementById("overlay");
        ov.style.display = "block";
        setTimeout(() => { ov.style.display = "none"; }, OVERLAY_MS);
      }

      load();
    </script>
  </body>
</html>
